<div class="flex flex-col space-y-4 overflow-y-auto bg-slate-700 max-h-screen w-full right-0 scroll-smooth ml-24">
  <% @posts.each do |post| %>
    <div class="flex flex-row bg-slate-800 max-h-96 w-auto p-2 m-2 justify-between">
      <div class="flex flex-col w-5/12 h-auto">
        <p>De: <%= post.user.email %></p>

        <p class="text-2xl mt-4"><%= post.content %></p>

        <p class="mt-4">
          <%= link_to post.link, target: "_blank" do %>
            ðŸ•®  Link al libro
          <% end %>
        </p>

        <div class="flex flex-row justify-between">
          <div class="flex flex-row">
            <p class="mr-4">Veces Recomendado: <%= post.reactions.where(reaction_type: "star").count %></p>
            <%= form_with model: Reaction.new, url: post_reactions_path(post), local: true do |f| %>
              <% if post.reactions.exists?(user_id: current_user.id) and post.reactions.exists?(reaction_type: "star") %>
                <%= f.hidden_field :reaction_type, value: "unstar" %>
                <%= f.submit "âœ¯", class: "mr-4" %>
              <% else %>
                <%= f.hidden_field :reaction_type, value: "star" %>
                <%= f.submit "â˜†", class: "mr-4" %>
              <% end %>
            <% end %>
          </div>
        </div>
      </div>

      <div class="flex items-center justify-center w-4/12">
        <p><%= image_tag post.image, width: 250, height: 350 if post.image %></p>
      </div>

      <div class="flex flex-col items-center justify-center w-4/12">
        <p class="text-2xl">Comentarios</p>

        <div class="flex flex-col space-y-2 overflow-y-auto max-h-96 w-full p-2 rounded bg-slate-700">
          <% post.comments.each do |comment| %>
            <div class="flex flex-col bg-slate-800 mt-4">
              De: <%= comment.user.email %>
              <p class="mt-2"><%= comment.content %></p>
            </div>
          <% end %>
        </div>
        <div class="flex flex-col mt-4">
          <%= form_with model: Comment.new, url: post_comments_path(post), local: true do |f| %>
            <%= f.text_area :content, class: "bg-slate-800 border-2 border-slate-200" %><br>
            <%= f.submit %>
          <% end %>
        </div>
      </div>
    </div>
  <% end %>
</div>

